(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("miniJsonp", [], factory);
	else if(typeof exports === 'object')
		exports["miniJsonp"] = factory();
	else
		root["miniJsonp"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(1);


/***/ },
/* 1 */
/***/ function(module, exports) {

	'use strict';

	Object.defineProperty(exports, "__esModule", {
	    value: true
	});
	exports.mapToStr = mapToStr;
	exports.uuid = uuid;
	exports.default = jsonp;
	/**
	 * @author: zimyuan
	 * @last-edit-date:2016-10-05
	 */

	/**
	 * Map json to string with given spilters.
	 * 
	 * @param {Funtcion} map
	 * @param {String} spliter1: spliter in key and value
	 * @param {String} spliter2: spliter in different key and value
	 * @return {String}
	 */
	function mapToStr(map) {
	    var spliter1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '&';
	    var spliter2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '=';

	    try {
	        var arr = [];

	        for (var p in map) {
	            arr.push(p + spliter2 + map[p]);
	        }return arr.join(spliter1);
	    } catch (e) {
	        alert(e.message);
	    }
	}

	/**
	 * Genarate uuid
	 * http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript
	 *
	 * @param {String} prefix
	 * @return {String}
	 */
	function uuid() {
	    var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

	    return prefix + 'xxxx4xxxyxxxx'.replace(/[xy]/g, function (c) {
	        var r = Math.random() * 16 | 0,
	            v = c == 'x' ? r : r & 0x3 | 0x8;
	        return v.toString(16);
	    });
	}

	/**
	 * meaningless function
	 * @return {undefined}
	 */
	function noop() {}

	/**
	 * Remove the `script` tag, `callback function` and `timer` generated by `jsonp` function.
	 *
	 * @param {String} id: callback function name
	 * @param {HTMLScriptElement} script
	 * @param {Number} timer id generated by setTimeout function
	 */
	function cleanup(id, script, timer) {
	    if (script.parentNode) script.parentNode.removeChild(script);

	    window[id] = noop;

	    if (timer) clearTimeout(timer);
	}

	/**
	 * Send request in type of `jsonp`
	 * 
	 * @param {String} url
	 * @param {Object} opts
	 * @param {Function} noop
	 * @return {Function}
	 */
	function jsonp(url) {
	    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
	    var func = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;
	    var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {
	        prefix: '__jsonp__',
	        paramName: 'callback',
	        timeout: 6000,
	        className: '__jsonp__'
	    };


	    var cbkName = uuid(opts.prefix);
	    var target = document.head || document.getElementsByTagName('script')[0];

	    var script = void 0;
	    var timer = void 0;

	    if (opts.timeout) {
	        timer = setTimeout(function () {
	            cleanup(cbkName, script, timer);
	        }, opts.timeout);
	    }

	    window[cbkName] = function (data) {
	        if (func) func(data);

	        cleanup(cbkName, script, timer);
	    };

	    var spliter = url.indexOf('?') > -1 ? '&' : '?';

	    url = '' + url + spliter + mapToStr(params) + '&' + opts.paramName + '=' + encodeURIComponent(cbkName);
	    url = url.replace('?&', '?');

	    script = document.createElement('script');
	    script.src = url;
	    script.className = opts.className;
	    target.parentNode.insertBefore(script, target);

	    return function () {
	        if (window[cbkName]) cleanup(cbkName, script, timer);
	    };
	}

/***/ }
/******/ ])
});
;